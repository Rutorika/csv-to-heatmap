!function(){"use strict";angular.module("csvToHeatmap",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ui.router","ui.bootstrap","toastr","ui-leaflet"])}(),function(){"use strict";function e(e,n){return{restrict:"A",require:"?ngModel",link:function(n,t,a,o){function l(){var n=new FileReader,a=t.get(0).files[0];n.onload=function(){var t=new e(n.result,{header:!0});o.$setViewValue(t.parse())},n.readAsText(a)}o&&t.on("change",function(){n.$evalAsync(l)})}}}e.$inject=["CSV","$log"],angular.module("csvToHeatmap").directive("csvReader",e)}(),function(){"use strict";function e(e,n,t){function a(){r.header=Object.keys(r.csvRows[0])}function o(t){return t.$valid?void n.getMap().then(function(n){l(n,s),s=new L.TileLayer.WebGLHeatMap(r.heatmapOptions),r.csvRows.forEach(function(e){var n=i(e);s.addDataPoint.apply(s,n)}),n.addLayer(s),e.debug("Done")}):void e.debug("invalid")}function l(n,t){t&&(n.removeLayer(t),e.debug("Removed"))}function i(e){return[e[r.latitudeColumn],e[r.longitudeColumn],r.pointIntensity]}var r=this;r.csvRows=[],r.csvChanged=a,r.renderHeatmap=o,r.map={center:{lat:42.34,lng:-71.1,zoom:11},defaults:{},layers:{baselayers:{googleRoadmap:{name:"Google Streets",layerType:"ROADMAP",type:"google"}}}},r.heatmapOptions={size:750,autoresize:!0},r.pointIntensity=8,r.header=[],r.latitudeColumn=null,r.longitudeColumn=null;var s}e.$inject=["$log","leafletData","toastr"],angular.module("csvToHeatmap").controller("MainController",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("csvToHeatmap").run(e)}(),function(){"use strict";function e(e,n){e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"Main"}),n.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("csvToHeatmap").config(e)}(),function(){"use strict";angular.module("csvToHeatmap").constant("CSV",CSV).constant("moment",moment)}(),function(){"use strict";function e(e,n){e.debugEnabled(!0),n.allowHtml=!0,n.timeOut=3e3,n.positionClass="toast-top-right",n.preventDuplicates=!1,n.progressBar=!1}e.$inject=["$logProvider","toastrConfig"],angular.module("csvToHeatmap").config(e)}(),angular.module("csvToHeatmap").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="row"><div class="col-md-8"><leaflet defaults="Main.map.defaults" layers="Main.map.layers" lf-center="Main.map.center" height="480px" width="100%"></leaflet></div><div class="col-md-4"><form name="csvForm" ng-submit="Main.renderHeatmap(csvForm)"><div class="form-group"><label class="control-label">CSV File</label> <input ng-model="Main.csvRows" type="file" name="csv" ng-change="Main.csvChanged()" csv-reader=""></div><div class="form-group"><label class="control-label" for="intensity">Point intensity (%)</label> <input type="number" name="intensity" min="0" max="100" ng-model="Main.pointIntensity" class="form-control" id="intensity"></div><div class="form-group"><label class="control-label" for="radius">Point radius (meters)</label> <input name="radius" type="number" min="0" max="10000" ng-model="Main.heatmapOptions.size" class="form-control" id="radius"></div><div class="form-group" ng-class="{\'has-error\': csvForm.$submitted && csvForm.latitudeColumn.$invalid}"><label class="control-label" for="latitudeColumn">Latitude column</label><select name="latitudeColumn" class="form-control" ng-model="Main.latitudeColumn" required="" id="latitudeColumn"><option ng-repeat="headerName in Main.header">{{ headerName }}</option></select><div ng-messages="csvForm.latitudeColumn.$error" ng-show="csvForm.$submitted"><div ng-messages-include="error-messages"></div></div></div><div class="form-group" ng-class="{\'has-error\': csvForm.$submitted && csvForm.longitudeColumn.$invalid}"><label class="control-label" for="longitudeColumn">Longitude column</label><select name="longitudeColumn" class="form-control" ng-model="Main.longitudeColumn" required="" id="longitudeColumn"><option ng-repeat="headerName in Main.header">{{ headerName }}</option></select><div ng-messages="csvForm.longitudeColumn.$error" ng-show="csvForm.$submitted"><div ng-messages-include="error-messages"></div></div></div><button type="submit" class="btn btn-primary">Render heatmap</button></form></div></div>'),e.put("app/components/csv-reader/csv-reader.html",'<input type="file" name="csv">')}]);
//# sourceMappingURL=../maps/scripts/app-808e12b29c.js.map
